#!/bin/sh

prog=purczynskiFIRantisymmetric_flat_differentiator_test.m

depends="test/purczynskiFIRantisymmetric_flat_differentiator_test.m test_common.m \
purczynskiFIRantisymmetric_flat_differentiator.m print_polynomial.m"

tmp=/tmp/$$
here=`pwd`
if [ $? -ne 0 ]; then echo "Failed pwd"; exit 1; fi

fail()
{
        echo FAILED ${0#$here"/"} $prog 1>&2
        cd $here
        rm -rf $tmp
        exit 1
}

pass()
{
        echo PASSED ${0#$here"/"} $prog
        cd $here
        rm -rf $tmp
        exit 0
}

trap "fail" 1 2 3 15
mkdir $tmp
if [ $? -ne 0 ]; then echo "Failed mkdir"; exit 1; fi
for file in $depends;do \
  cp -R src/$file $tmp; \
  if [ $? -ne 0 ]; then echo "Failed cp "$file; fail; fi \
done
cd $tmp
if [ $? -ne 0 ]; then echo "Failed cd"; fail; fi

#
# the output should look like this
#

cat > test_h2.ok << 'EOF'
h2 = [ -0.000000000000,  0.000000000000, -0.000000000002,  0.000000000004, ... 
       -0.000000000042,  0.000000000081, -0.000000000592,  0.000000001118, ... 
       -0.000000006116,  0.000000011268, -0.000000049388,  0.000000088761, ... 
       -0.000000324862,  0.000000569293, -0.000001790056,  0.000003057313, ... 
       -0.000008433917,  0.000014033068, -0.000034516588,  0.000055928894, ... 
       -0.000124259718,  0.000196017456, -0.000397631096,  0.000610561549, ... 
       -0.001141348518,  0.001705980798, -0.002963116344,  0.004313069402, ... 
       -0.007014724406,  0.009953237082, -0.015276510929,  0.021173249792, ... 
       -0.030934934631,  0.042052426671, -0.059140316206,  0.079510890765, ... 
       -0.109519104084,  0.148420329427, -0.207509881423,  0.299444524283, ... 
       -0.477272727273,  0.988166930134,  0.000000000000, -0.988166930134, ... 
        0.477272727273, -0.299444524283,  0.207509881423, -0.148420329427, ... 
        0.109519104084, -0.079510890765,  0.059140316206, -0.042052426671, ... 
        0.030934934631, -0.021173249792,  0.015276510929, -0.009953237082, ... 
        0.007014724406, -0.004313069402,  0.002963116344, -0.001705980798, ... 
        0.001141348518, -0.000610561549,  0.000397631096, -0.000196017456, ... 
        0.000124259718, -0.000055928894,  0.000034516588, -0.000014033068, ... 
        0.000008433917, -0.000003057313,  0.000001790056, -0.000000569293, ... 
        0.000000324862, -0.000000088761,  0.000000049388, -0.000000011268, ... 
        0.000000006116, -0.000000001118,  0.000000000592, -0.000000000081, ... 
        0.000000000042, -0.000000000004,  0.000000000002, -0.000000000000, ... 
        0.000000000000 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test_h2.ok"; fail; fi

cat > test_h4.ok << 'EOF'
h4 = [ -0.000000000000, -0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000000001, -0.000000000000,  0.000000000002,  0.000000000000, ... 
       -0.000000000021, -0.000000000000,  0.000000000041,  0.000000000000, ... 
       -0.000000000296, -0.000000000000,  0.000000000559,  0.000000000000, ... 
       -0.000000003058, -0.000000000000,  0.000000005634,  0.000000000000, ... 
       -0.000000024694, -0.000000000000,  0.000000044380,  0.000000000000, ... 
       -0.000000162431, -0.000000000000,  0.000000284646,  0.000000000000, ... 
       -0.000000895028, -0.000000000000,  0.000001528657,  0.000000000000, ... 
       -0.000004216959, -0.000000000000,  0.000007016534,  0.000000000000, ... 
       -0.000017258294, -0.000000000000,  0.000027964447,  0.000000000000, ... 
       -0.000062129859, -0.000000000000,  0.000098008728,  0.000000000000, ... 
       -0.000198815548, -0.000000000000,  0.000305280774,  0.000000000000, ... 
       -0.000570674259, -0.000000000000,  0.000852990399,  0.000000000000, ... 
       -0.001481558172, -0.000000000000,  0.002156534701,  0.000000000000, ... 
       -0.003507362203, -0.000000000000,  0.004976618541,  0.000000000000, ... 
       -0.007638255464, -0.000000000000,  0.010586624896,  0.000000000000, ... 
       -0.015467467315, -0.000000000000,  0.021026213336,  0.000000000000, ... 
       -0.029570158103, -0.000000000000,  0.039755445382,  0.000000000000, ... 
       -0.054759552042, -0.000000000000,  0.074210164714,  0.000000000000, ... 
       -0.103754940711, -0.000000000000,  0.149722262142,  0.000000000000, ... 
       -0.238636363636, -0.000000000000,  0.494083465067,  0.000000000000, ... 
        0.000000000000,  0.000000000000, -0.494083465067, -0.000000000000, ... 
        0.238636363636,  0.000000000000, -0.149722262142, -0.000000000000, ... 
        0.103754940711,  0.000000000000, -0.074210164714, -0.000000000000, ... 
        0.054759552042,  0.000000000000, -0.039755445382, -0.000000000000, ... 
        0.029570158103,  0.000000000000, -0.021026213336, -0.000000000000, ... 
        0.015467467315,  0.000000000000, -0.010586624896, -0.000000000000, ... 
        0.007638255464,  0.000000000000, -0.004976618541, -0.000000000000, ... 
        0.003507362203,  0.000000000000, -0.002156534701, -0.000000000000, ... 
        0.001481558172,  0.000000000000, -0.000852990399, -0.000000000000, ... 
        0.000570674259,  0.000000000000, -0.000305280774, -0.000000000000, ... 
        0.000198815548,  0.000000000000, -0.000098008728, -0.000000000000, ... 
        0.000062129859,  0.000000000000, -0.000027964447, -0.000000000000, ... 
        0.000017258294,  0.000000000000, -0.000007016534, -0.000000000000, ... 
        0.000004216959,  0.000000000000, -0.000001528657, -0.000000000000, ... 
        0.000000895028,  0.000000000000, -0.000000284646, -0.000000000000, ... 
        0.000000162431,  0.000000000000, -0.000000044380, -0.000000000000, ... 
        0.000000024694,  0.000000000000, -0.000000005634, -0.000000000000, ... 
        0.000000003058,  0.000000000000, -0.000000000559, -0.000000000000, ... 
        0.000000000296,  0.000000000000, -0.000000000041, -0.000000000000, ... 
        0.000000000021,  0.000000000000, -0.000000000002, -0.000000000000, ... 
        0.000000000001,  0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000000000 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test_h4.ok"; fail; fi

cat > test_h8.ok << 'EOF'
h8 = [ -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000000001,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000000011, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000000020,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000000148, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000000280,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000001529, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000002817,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000012347, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000022190,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000081216, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000142323,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000447514, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000764328,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000002108479, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000003508267,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000008629147, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000013982223,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000031064929, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000049004364,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000099407774, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000152640387,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000285337129, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000426495200,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000740779086, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.001078267351,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.001753681102, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.002488309270,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.003819127732, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.005293312448,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.007733733658, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.010513106668,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.014785079051, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.019877722691,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.027379776021, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.037105082357,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.051877470356, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.074861131071,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.119318181818, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.247041732534,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.247041732534, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.119318181818,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.074861131071, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.051877470356,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.037105082357, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.027379776021,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.019877722691, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.014785079051,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.010513106668, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.007733733658,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.005293312448, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.003819127732,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.002488309270, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.001753681102,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.001078267351, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000740779086,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000426495200, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000285337129,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000152640387, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000099407774,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000049004364, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000031064929,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000013982223, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000008629147,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000003508267, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000002108479,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000764328, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000447514,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000142323, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000081216,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000022190, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000012347,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000002817, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000001529,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000000280, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000000148,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000000020, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000000011,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000000001, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
       -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        0.000000000000 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test_h8.ok"; fail; fi

cat > test_h16.ok << 'EOF'
h16 = [ -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000000000005, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000000010,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000000000074, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000000140,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000000000765, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000001408,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000000006173, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000011095,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000000040608, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000071162,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000000223757, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000382164,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000001054240, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000001754133,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000004314574, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000006991112,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000015532465, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000024502182,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000049703887, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000076320194,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000142668565, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000213247600,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000370389543, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000539133675,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000876840551, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.001244154635,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.001909563866, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.002646656224,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.003866866829, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.005256553334,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.007392539526, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.009938861346,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.013689888011, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.018552541178,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.025938735178, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.037430565535,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.059659090909, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.123520866267,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.123520866267, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.059659090909,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.037430565535, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.025938735178,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.018552541178, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.013689888011,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.009938861346, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.007392539526,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.005256553334, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.003866866829,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.002646656224, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.001909563866,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.001244154635, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000876840551,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000539133675, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000370389543,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000213247600, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000142668565,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000076320194, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000049703887,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000024502182, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000015532465,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000006991112, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000004314574,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000001754133, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000001054240,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000000382164, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000223757,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000000071162, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000040608,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000000011095, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000006173,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000000001408, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000000765,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000000000140, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000000074,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000000000010, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000000005,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
         0.000000000000,  0.000000000000,  0.000000000000,  0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
        -0.000000000000, -0.000000000000, -0.000000000000, -0.000000000000, ... 
         0.000000000000 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test_h16.ok"; fail; fi

#
# run and see if the results match
#
echo "Running $prog" 

octave --no-gui -q $prog >test.out 2>&1
if [ $? -ne 0 ]; then echo "Failed running $prog"; fail; fi

nstr="purczynskiFIRantisymmetric_flat_differentiator_test"

diff -Bb test_h2.ok $nstr"_h2_coef.m"
if [ $? -ne 0 ]; then echo "Failed diff -Bb test_h2.ok"; fail; fi

diff -Bb test_h4.ok $nstr"_h4_coef.m"
if [ $? -ne 0 ]; then echo "Failed diff -Bb test_h4.ok"; fail; fi

diff -Bb test_h8.ok $nstr"_h8_coef.m"
if [ $? -ne 0 ]; then echo "Failed diff -Bb test_h8.ok"; fail; fi

diff -Bb test_h16.ok $nstr"_h16_coef.m"
if [ $? -ne 0 ]; then echo "Failed diff -Bb test_h16.ok"; fail; fi

#
# this much worked
#
pass

