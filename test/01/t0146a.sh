#!/bin/sh

prog=complementaryFIRlatticeFilter_test.m
depends="complementaryFIRlatticeFilter_test.m test_common.m \
complementaryFIRlatticeFilter.m crossWelch.m minphase.m print_polynomial.m \
complementaryFIRlattice.m flt2SD.m x2nextra.m \
bin2SD.oct complementaryFIRdecomp.oct"

tmp=/tmp/$$
here=`pwd`
if [ $? -ne 0 ]; then echo "Failed pwd"; exit 1; fi

fail()
{
        echo FAILED ${0#$here"/"} $prog 1>&2
        cd $here
        rm -rf $tmp
        exit 1
}

pass()
{
        echo PASSED ${0#$here"/"} $prog
        cd $here
        rm -rf $tmp
        exit 0
}

trap "fail" 1 2 3 15
mkdir $tmp
if [ $? -ne 0 ]; then echo "Failed mkdir"; exit 1; fi
for file in $depends;do \
  cp -R src/$file $tmp; \
  if [ $? -ne 0 ]; then echo "Failed cp "$file; fail; fi \
done
cd $tmp
if [ $? -ne 0 ]; then echo "Failed cd"; fail; fi

#
# the output should look like this
#
cat > test.ykrz.ok << 'EOF'
ykrz = [       2.8334,      -0.6415,     -16.3611,     -27.7821, ... 
               2.7324,      78.7173,     118.0854,      -2.8133, ... 
            -266.5904,    -368.4040,      46.8955,     816.4795, ... 
             961.9250,    -681.0337,   -4156.3378,   -7722.5410, ... 
           -8863.9647,   -6374.3066,   -1585.0613,    2598.2264, ... 
            3967.6195,    2462.9114,    -418.6449,   -3339.5422, ... 
           -6073.4455,   -8861.6029,  -11148.5622,  -11391.5002, ... 
           -8419.4578,   -3082.5240,    1722.8156,    3137.9708, ... 
             803.8821,   -2710.9124,   -4087.8225,   -2154.3419, ... 
            1234.6105,    3005.0391,    1646.2191,   -1607.3525, ... 
           -4125.5646,   -4412.9429,   -3413.4411,   -3323.3786, ... 
           -5084.4951,   -7174.2761,   -7115.6560,   -4144.6503, ... 
             -17.8861,    2977.6982,    4417.2730,    5654.1022, ... 
            7483.3482,    8713.3595,    7520.5594,    3872.1300, ... 
             -54.1571,   -1931.5496,   -1389.1021,      54.0327, ... 
             757.3989,     267.9823,    -853.6350,   -2026.3394, ... 
           -3224.2362,   -4730.0734,   -6526.4264,   -8071.6258, ... 
           -8711.1368,   -8443.1436,   -8027.6709,   -8077.1170, ... 
           -8059.5225,   -6691.0631,   -3693.0309,    -802.7958, ... 
            -292.7034,   -2342.3865,   -4512.5755,   -4357.2276, ... 
           -2198.8425,    -587.5757,    -997.8161,   -2022.1352, ... 
           -1455.0026,     541.4956,    1505.7462,      90.7905, ... 
           -1711.3141,    -726.2409,    3306.0026,    6829.8427, ... 
            6045.7080,     940.6988,   -4549.2640,   -6118.0476, ... 
           -2582.4601,    3531.3806,    8074.2631,    8068.4416, ... 
            3637.8006,   -2008.7403,   -4870.4463,   -3509.2140, ... 
            -508.9438,     -49.3917,   -3466.7656,   -7399.5050, ... 
           -6954.9766,    -950.3113,    6319.4211,    8897.7357, ... 
            4786.1416,   -2250.5986,   -6276.7762,   -4366.4883, ... 
            1514.6671,    6984.5182,    8934.7907,    7070.8339, ... 
            2955.8542,   -1515.1259,   -4708.5677,   -5389.4528, ... 
           -3257.6826,     427.3847,    3380.9148,    4069.1332, ... 
            3117.4120,    2685.3565,    4246.4308,    7026.0711, ... 
            8753.8961,    7976.7813,    5426.0089,    3071.5622, ... 
            1923.9808,    1078.0618,    -876.2538,   -3641.4631, ... 
           -4847.7535,   -2297.4238,    3406.2578,    8792.6254, ... 
           10319.5069,    7268.8919,    1901.5006,   -2814.3946, ... 
           -5263.3041,   -5321.4453,   -3505.5200,    -794.2974, ... 
            1033.5609,      42.3985,   -4044.7035,   -8879.2425, ... 
          -10987.8444,   -8639.0878,   -3132.2159,    2717.2971, ... 
            7017.3843,    9646.4261,   11079.1934,   11305.6679, ... 
           10215.3441,    8660.3871,    8158.7382,    9268.9292, ... 
           10599.5691,   10008.3894,    6837.9012,    2626.1336, ... 
            -444.2890,   -1463.9740,   -1108.4276,    -528.0532, ... 
            -449.9339,   -1121.7461,   -2379.6477,   -3515.2585, ... 
           -3671.5087,   -2897.8116,   -2466.4951,   -3521.6151, ... 
           -5427.9191,   -6109.7862,   -4296.2598,    -934.4221, ... 
            1936.6867,    3343.6405,    3910.4182,    4540.7788, ... 
            5237.7898,    5371.6272,    4456.7272,    2379.1176, ... 
            -715.9195,   -4127.8582,   -6473.1028,   -6576.1948, ... 
           -4752.1767,   -2787.9536,   -2254.9064,   -3057.6246, ... 
           -3934.1843,   -4140.0392,   -4128.9899,   -4474.2143, ... 
           -4685.0115,   -3623.4741,   -1048.9528,    1716.0615, ... 
            2998.3633,    2586.6691,    2114.1924,    3440.7037, ... 
            6731.0411,   10151.8697,   11524.0435,   10265.2278, ... 
            7667.7904,    5458.3672,    4276.0575,    3639.5970, ... 
            3064.0843,    2728.1457,    2928.5176,    3300.4506, ... 
            3030.9939,    1819.2662,     249.9770,    -894.2609, ... 
           -1405.3236,   -1564.1889,   -1595.1777,   -1629.7525, ... 
           -2152.7456,   -3852.1498,   -6600.4765,   -8750.8211, ... 
           -8028.5519,   -3554.7054,    2904.9920,    7802.7585, ... 
            8240.2650,    4038.1483,   -2191.2579,   -6987.6335, ... 
           -8447.5938,   -7138.8693,   -4872.7127,   -2662.4616, ... 
             -22.3979,    3696.6419,    7456.8319,    8501.1738 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.ykrz.ok"; fail; fi

cat > test.ykrzhat.ok << 'EOF'
ykrzhat = [   -4624.6257,    7289.9286,   -2137.0584,    -380.8461, ... 
               1862.1162,   -2150.0189,   -7837.1153,    6334.0545, ... 
              10781.5698,  -12674.4891,    -380.1888,    5102.4310, ... 
              -2136.9864,    -818.3392,    -461.0705,    5810.3306, ... 
              -1777.2623,  -10584.5781,    8882.1565,    -130.4102, ... 
               3656.3304,   -1489.8260,   -5188.7084,   -1456.6445, ... 
               1785.5523,    5540.4023,   -4932.7983,    6284.9465, ... 
              -4741.1049,   -2597.6986,    1987.9527,   -3022.5684, ... 
               5286.6410,    7802.2859,  -13534.8814,    2956.5737, ... 
              -5597.5436,   14296.0046,   -3136.9138,   -6199.9828, ... 
              -1260.5082,    4421.4470,   -3420.5784,    7171.2799, ... 
               1715.7828,  -14398.8226,    5441.8900,    8500.2762, ... 
              -6787.7189,     177.1283,     860.8115,    -932.1175, ... 
               2719.3518,   -4974.6462,    -138.4025,    3162.3738, ... 
               6001.2118,  -13538.2048,    2689.3820,    9803.1939, ... 
              -5310.7079,    2010.4970,   -9727.9150,    5591.6397, ... 
               5015.6747,   -1745.0643,   -1911.4909,    4757.8604, ... 
             -12800.4309,    4015.4083,   12654.9299,   -2619.2888, ... 
              -5719.9181,  -10842.0298,    9719.8679,   14533.6244, ... 
              -9315.3852,  -10483.3414,    -192.7191,   11299.2958, ... 
              -3418.6053,    3446.1657,     311.9668,   -9012.3563, ... 
               4036.8268,   -1809.1002,    2287.4369,    2482.7436, ... 
              -2013.3059,    3639.9825,    -741.8878,  -10572.4227, ... 
                995.9808,    7080.0412,    7551.1136,   -1042.9098, ... 
             -13957.9318,    2905.3593,    -801.5931,    5573.3707, ... 
               3288.9599,    4143.9256,   -9596.4300,   -5567.6710, ... 
                997.5864,   11249.9945,   -2510.8223,   -5549.8741, ... 
               5430.6824,   -1982.5337,      87.6275,   -5249.5556, ... 
               8293.8753,   -5173.8239,   -2859.6704,    8866.5883, ... 
                943.5257,   -5620.1036,   -5784.3894,    8773.5053, ... 
              -6224.8621,    6897.6599,   -2393.5718,    2919.0954, ... 
             -11951.0127,   10630.8811,   -1484.8121,   -1051.8573, ... 
               5131.7992,   -5515.7298,   -2889.8508,   -5981.3218, ... 
              19059.8874,  -10542.1042,    5613.9468,  -11451.5612, ... 
               4124.2295,    5440.6270,   -2644.0037,   -4504.2112, ... 
                781.1248,    6211.6273,   -2470.1286,    2031.9983, ... 
              -1744.0290,   -7655.9884,    6726.4817,     538.4996, ... 
               1828.9986,    -820.6936,      74.9149,   -5880.6926, ... 
               7660.8779,    -765.8067,    -673.7846,   -3738.3228, ... 
              -1018.8912,    3850.9252,    9148.4459,  -15247.5934, ... 
              11276.4363,  -13031.7216,    9151.3964,   -2364.1248, ... 
               6627.7338,  -13746.4966,    4879.2213,   11318.9839, ... 
             -11235.1624,   -2248.4043,    -735.6093,    7279.0034, ... 
               7773.2893,  -15438.1588,    1905.1196,    1273.4311, ... 
               4079.9364,    3905.0019,   -7313.2365,   -1699.3333, ... 
               -231.5185,   12394.3505,  -11866.0075,    -829.9798, ... 
               2393.5885,    6608.1728,     302.4906,  -14064.9542, ... 
               5068.3028,    7997.3162,   -3040.0063,   -2940.4652, ... 
              -1569.9262,    7446.4012,   -8311.3163,   -1561.1659, ... 
              12915.1906,   -4517.6978,  -12801.7744,    9514.8364, ... 
               6480.3463,   -5378.7548,    -805.6524,      67.5082, ... 
                125.3344,     -44.5579,   -2389.4245,    7081.2893, ... 
                  8.7144,   -5922.6354,    -619.4154,     593.4525, ... 
               7122.3761,   -2830.6553,   -8517.7429,    8798.8652, ... 
              -3351.1555,     699.8652,    4888.0147,  -11700.6015, ... 
               6178.1888,    1508.1882,     466.2289,   -5631.0709, ... 
               3140.3469,   -1337.6099,    6498.5034,   -3420.1414, ... 
              -3787.6299,    1099.3114,     179.4445,   -1833.9605, ... 
               4440.1506,     418.0064,      56.6216,   -3350.9414, ... 
               1374.8133,   -6539.0292,    9800.3526,    -183.8521, ... 
              -1657.5239,   -1870.2152,   -5559.1283,    7936.2453, ... 
               -508.7400,   -1246.7807,    7174.8220,  -10336.2511, ... 
               -650.0133,   -2320.8542,    6167.4999,    8634.0306, ... 
              -3220.0718,   -6458.2017,   -9555.2317,   13802.6659 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.ykrzhat.ok"; fail; fi

cat > test.stdxxkrz.ok << 'EOF'
stdxxkrz = [       5.0190,       8.4552,      22.2163,      88.1882, ... 
                 148.2266,     148.3880,     282.6889,     456.4573, ... 
                 457.4835,     765.1512,    1107.3476,    1122.1634, ... 
                2024.1322,    2322.0800,    4410.8411,    6332.9978, ... 
                4892.0884,    5100.5332,    4776.3706,    4731.2844, ... 
                4762.5221,    4669.8182,    4674.4177,    4682.2263, ... 
                4660.1320,    4660.4763,    4662.8012,    4659.1408, ... 
                4658.0704,    4658.1744 ];
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.stdxxkrz.ok"; fail; fi

cat > test.ysdkrz.ok << 'EOF'
ysdkrz = [       3.0000,      -0.0000,     -17.0000,     -27.0000, ... 
                 2.0000,      78.0000,     119.0000,      -8.0000, ... 
              -260.0000,    -361.0000,      42.0000,     810.0000, ... 
               962.0000,    -687.0000,   -4148.0000,   -7694.0000, ... 
             -8861.0000,   -6378.0000,   -1568.0000,    2605.0000, ... 
              3953.0000,    2455.0000,    -413.0000,   -3338.0000, ... 
             -6059.0000,   -8842.0000,  -11138.0000,  -11367.0000, ... 
             -8402.0000,   -3087.0000,    1710.0000,    3148.0000, ... 
               812.0000,   -2727.0000,   -4083.0000,   -2140.0000, ... 
              1232.0000,    2995.0000,    1639.0000,   -1603.0000, ... 
             -4116.0000,   -4410.0000,   -3418.0000,   -3319.0000, ... 
             -5055.0000,   -7171.0000,   -7122.0000,   -4144.0000, ... 
                 4.0000,    2979.0000,    4404.0000,    5638.0000, ... 
              7457.0000,    8711.0000,    7532.0000,    3852.0000, ... 
               -75.0000,   -1923.0000,   -1370.0000,      46.0000, ... 
               760.0000,     258.0000,    -861.0000,   -1999.0000, ... 
             -3224.0000,   -4743.0000,   -6501.0000,   -8042.0000, ... 
             -8711.0000,   -8446.0000,   -8004.0000,   -8052.0000, ... 
             -8041.0000,   -6701.0000,   -3694.0000,    -794.0000, ... 
              -281.0000,   -2337.0000,   -4512.0000,   -4359.0000, ... 
             -2200.0000,    -568.0000,    -977.0000,   -2034.0000, ... 
             -1483.0000,     532.0000,    1547.0000,     101.0000, ... 
             -1734.0000,    -744.0000,    3310.0000,    6838.0000, ... 
              6035.0000,     919.0000,   -4553.0000,   -6085.0000, ... 
             -2571.0000,    3513.0000,    8053.0000,    8051.0000, ... 
              3640.0000,   -1992.0000,   -4864.0000,   -3527.0000, ... 
              -505.0000,     -33.0000,   -3456.0000,   -7396.0000, ... 
             -6951.0000,    -950.0000,    6319.0000,    8885.0000, ... 
              4775.0000,   -2256.0000,   -6275.0000,   -4348.0000, ... 
              1525.0000,    6974.0000,    8906.0000,    7049.0000, ... 
              2955.0000,   -1505.0000,   -4692.0000,   -5382.0000, ... 
             -3260.0000,     423.0000,    3386.0000,    4056.0000, ... 
              3112.0000,    2681.0000,    4237.0000,    7007.0000, ... 
              8755.0000,    7971.0000,    5397.0000,    3067.0000, ... 
              1931.0000,    1066.0000,    -878.0000,   -3614.0000, ... 
             -4846.0000,   -2305.0000,    3408.0000,    8784.0000, ... 
             10307.0000,    7255.0000,    1884.0000,   -2822.0000, ... 
             -5221.0000,   -5303.0000,   -3518.0000,    -801.0000, ... 
              1026.0000,      56.0000,   -4036.0000,   -8869.0000, ... 
            -10985.0000,   -8607.0000,   -3126.0000,    2712.0000, ... 
              7008.0000,    9621.0000,   11051.0000,   11293.0000, ... 
             10209.0000,    8650.0000,    8130.0000,    9253.0000, ... 
             10579.0000,   10010.0000,    6818.0000,    2624.0000, ... 
              -460.0000,   -1453.0000,   -1082.0000,    -535.0000, ... 
              -474.0000,   -1116.0000,   -2354.0000,   -3502.0000, ... 
             -3685.0000,   -2901.0000,   -2465.0000,   -3480.0000, ... 
             -5424.0000,   -6127.0000,   -4297.0000,    -910.0000, ... 
              1957.0000,    3314.0000,    3885.0000,    4544.0000, ... 
              5259.0000,    5359.0000,    4418.0000,    2378.0000, ... 
              -699.0000,   -4107.0000,   -6478.0000,   -6585.0000, ... 
             -4722.0000,   -2773.0000,   -2260.0000,   -3061.0000, ... 
             -3922.0000,   -4137.0000,   -4116.0000,   -4455.0000, ... 
             -4687.0000,   -3619.0000,   -1049.0000,    1711.0000, ... 
              3001.0000,    2587.0000,    2098.0000,    3429.0000, ... 
              6736.0000,   10136.0000,   11490.0000,   10261.0000, ... 
              7662.0000,    5428.0000,    4273.0000,    3651.0000, ... 
              3059.0000,    2717.0000,    2911.0000,    3297.0000, ... 
              3041.0000,    1818.0000,     227.0000,    -889.0000, ... 
             -1388.0000,   -1556.0000,   -1601.0000,   -1634.0000, ... 
             -2152.0000,   -3840.0000,   -6583.0000,   -8745.0000, ... 
             -8016.0000,   -3538.0000,    2893.0000,    7794.0000, ... 
              8216.0000,    4038.0000,   -2183.0000,   -6981.0000, ... 
             -8441.0000,   -7123.0000,   -4850.0000,   -2661.0000, ... 
               -30.0000,    3693.0000,    7439.0000,    8492.0000 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.ysdkrz.ok"; fail; fi

cat > test.ysdkrzhat.ok << 'EOF'
ysdkrzhat = [   -4621.0000,    7268.0000,   -2151.0000,    -408.0000, ... 
                 1827.0000,   -2177.0000,   -7847.0000,    6313.0000, ... 
                10771.0000,  -12640.0000,    -372.0000,    5085.0000, ... 
                -2165.0000,    -867.0000,    -518.0000,    5746.0000, ... 
                -1817.0000,  -10596.0000,    8855.0000,    -130.0000, ... 
                 3655.0000,   -1482.0000,   -5182.0000,   -1464.0000, ... 
                 1768.0000,    5522.0000,   -4928.0000,    6276.0000, ... 
                -4737.0000,   -2611.0000,    1956.0000,   -3052.0000, ... 
                 5243.0000,    7762.0000,  -13536.0000,    2933.0000, ... 
                -5600.0000,   14272.0000,   -3113.0000,   -6154.0000, ... 
                -1213.0000,    4456.0000,   -3385.0000,    7180.0000, ... 
                 1730.0000,  -14368.0000,    5429.0000,    8477.0000, ... 
                -6786.0000,     174.0000,     861.0000,    -934.0000, ... 
                 2699.0000,   -4993.0000,    -174.0000,    3113.0000, ... 
                 5945.0000,  -13565.0000,    2636.0000,    9742.0000, ... 
                -5344.0000,    1973.0000,   -9737.0000,    5563.0000, ... 
                 4992.0000,   -1756.0000,   -1922.0000,    4737.0000, ... 
               -12796.0000,    3988.0000,   12618.0000,   -2622.0000, ... 
                -5709.0000,  -10821.0000,    9700.0000,   14506.0000, ... 
                -9298.0000,  -10456.0000,    -177.0000,   11294.0000, ... 
                -3403.0000,    3450.0000,     321.0000,   -8998.0000, ... 
                 4021.0000,   -1812.0000,    2291.0000,    2505.0000, ... 
                -1979.0000,    3654.0000,    -739.0000,  -10572.0000, ... 
                  968.0000,    7042.0000,    7517.0000,   -1053.0000, ... 
               -13942.0000,    2896.0000,    -801.0000,    5571.0000, ... 
                 3301.0000,    4157.0000,   -9570.0000,   -5563.0000, ... 
                  984.0000,   11229.0000,   -2485.0000,   -5503.0000, ... 
                 5459.0000,   -1962.0000,      79.0000,   -5266.0000, ... 
                 8256.0000,   -5176.0000,   -2852.0000,    8870.0000, ... 
                  971.0000,   -5578.0000,   -5743.0000,    8791.0000, ... 
                -6184.0000,    6919.0000,   -2355.0000,    2945.0000, ... 
               -11914.0000,   10615.0000,   -1491.0000,   -1064.0000, ... 
                 5115.0000,   -5505.0000,   -2872.0000,   -5949.0000, ... 
                19062.0000,  -10489.0000,    5633.0000,  -11422.0000, ... 
                 4103.0000,    5401.0000,   -2671.0000,   -4516.0000, ... 
                  772.0000,    6196.0000,   -2481.0000,    2001.0000, ... 
                -1778.0000,   -7684.0000,    6685.0000,     530.0000, ... 
                 1848.0000,    -769.0000,     143.0000,   -5803.0000, ... 
                 7709.0000,    -711.0000,    -623.0000,   -3682.0000, ... 
                 -969.0000,    3888.0000,    9174.0000,  -15192.0000, ... 
                11278.0000,  -13005.0000,    9128.0000,   -2373.0000, ... 
                 6609.0000,  -13728.0000,    4863.0000,   11289.0000, ... 
               -11234.0000,   -2264.0000,    -755.0000,    7242.0000, ... 
                 7736.0000,  -15435.0000,    1885.0000,    1260.0000, ... 
                 4068.0000,    3907.0000,   -7277.0000,   -1664.0000, ... 
                 -202.0000,   12398.0000,  -11829.0000,    -818.0000, ... 
                 2391.0000,    6584.0000,     278.0000,  -14072.0000, ... 
                 5029.0000,    7958.0000,   -3057.0000,   -2952.0000, ... 
                -1581.0000,    7417.0000,   -8322.0000,   -1589.0000, ... 
                12868.0000,   -4526.0000,  -12789.0000,    9499.0000, ... 
                 6478.0000,   -5355.0000,    -781.0000,      99.0000, ... 
                  162.0000,      -2.0000,   -2337.0000,    7124.0000, ... 
                   63.0000,   -5868.0000,    -585.0000,     613.0000, ... 
                 7126.0000,   -2809.0000,   -8485.0000,    8805.0000, ... 
                -3329.0000,     708.0000,    4889.0000,  -11678.0000, ... 
                 6164.0000,    1496.0000,     452.0000,   -5636.0000, ... 
                 3120.0000,   -1358.0000,    6457.0000,   -3448.0000, ... 
                -3812.0000,    1077.0000,     175.0000,   -1819.0000, ... 
                 4458.0000,     444.0000,      68.0000,   -3360.0000, ... 
                 1337.0000,   -6576.0000,    9741.0000,    -206.0000, ... 
                -1653.0000,   -1845.0000,   -5520.0000,    7951.0000, ... 
                 -489.0000,   -1242.0000,    7153.0000,  -10340.0000, ... 
                 -670.0000,   -2325.0000,    6170.0000,    8651.0000, ... 
                -3179.0000,   -6424.0000,   -9543.0000,   13759.0000 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.ysdkrzhat.ok"; fail; fi

cat > test.stdxxsdkrz.ok << 'EOF'
stdxxsdkrz = [       5.0025,       8.4238,      22.0838,      86.9480, ... 
                   147.0565,     147.2193,     282.5646,     451.5517, ... 
                   452.5934,     756.2523,    1096.5415,    1111.6503, ... 
                  2020.6245,    2321.1083,    4407.4975,    6326.4948, ... 
                  4893.3519,    5101.1905,    4768.7275,    4723.1350, ... 
                  4754.3832,    4662.7139,    4667.2871,    4674.6733, ... 
                  4652.8659,    4653.2126,    4655.5705,    4651.9605, ... 
                  4650.9231,    4651.0240 ];
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.stdxxsdkrz.ok"; fail; fi

#
# run and see if the results match
#
echo "Running $prog"

octave-cli -q $prog >test.out 2>&1
if [ $? -ne 0 ]; then echo "Failed running $prog"; fail; fi

diff -Bb test.ykrz.ok complementaryFIRlatticeFilter_test_ykrz.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.ykrz.ok"; fail; fi

diff -Bb test.ykrzhat.ok complementaryFIRlatticeFilter_test_ykrzhat.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.ykrzhat.ok"; fail; fi

diff -Bb test.stdxxkrz.ok complementaryFIRlatticeFilter_test_stdxxkrz.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.stdxxkrz.ok"; fail; fi

diff -Bb test.ysdkrz.ok complementaryFIRlatticeFilter_test_ysdkrz.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.ysdkrz.ok"; fail; fi

diff -Bb test.ysdkrzhat.ok complementaryFIRlatticeFilter_test_ysdkrzhat.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.ysdkrzhat.ok"; fail; fi

diff -Bb test.stdxxsdkrz.ok complementaryFIRlatticeFilter_test_stdxxsdkrz.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.stdxxsdkrz.ok"; fail; fi

#
# this much worked
#
pass

