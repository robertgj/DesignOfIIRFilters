#!/bin/sh

prog=complementaryFIRlattice_bandpass_test.m
depends="test/complementaryFIRlattice_bandpass_test.m test_common.m delayz.m \
print_polynomial.m x2tf.m complementaryFIRlattice.m \
complementaryFIRlatticeFilter.m crossWelch.m \
complementaryFIRlattice2Abcd.m Abcd2tf.m KW.m \
minphase.m direct_form_scale.m complementaryFIRdecomp.oct"

tmp=/tmp/$$
here=`pwd`
if [ $? -ne 0 ]; then echo "Failed pwd"; exit 1; fi

fail()
{
        echo FAILED ${0#$here"/"} $prog 1>&2
        cd $here
        rm -rf $tmp
        exit 1
}

pass()
{
        echo PASSED ${0#$here"/"} $prog
        cd $here
        rm -rf $tmp
        exit 0
}

trap "fail" 1 2 3 15
mkdir $tmp
if [ $? -ne 0 ]; then echo "Failed mkdir"; exit 1; fi
for file in $depends;do \
  cp -R src/$file $tmp; \
  if [ $? -ne 0 ]; then echo "Failed cp "$file; fail; fi \
done
cd $tmp
if [ $? -ne 0 ]; then echo "Failed cd"; fail; fi

#
# the output should look like this
#
cat > test.b17b.ok << 'EOF'
b17b = [   0.09202089,   0.12004555,   0.02386986,  -0.16085218, ... 
          -0.24574500,  -0.11274575,   0.11917389,   0.22186123, ... 
           0.12463553,  -0.02687458,  -0.07667980,  -0.03250055, ... 
           0.00090041,  -0.01515647,  -0.03327605,  -0.02161084, ... 
           0.02350013 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.b17b.ok"; fail; fi
cat > test.b17bc.ok << 'EOF'
b17bc = [   0.72484441,  -0.27110394,   0.18391585,   0.33466537, ... 
            0.18461460,  -0.01327284,  -0.07986010,  -0.04203080, ... 
           -0.00778946,  -0.01431989,  -0.02387903,  -0.00879194, ... 
            0.01340608,   0.01790940,   0.00693980,  -0.00226428, ... 
           -0.00298340 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.b17bc.ok"; fail; fi
cat > test.k17b.ok << 'EOF'
k17b = [   0.99947486,   0.99984392,   0.99816420,   0.99855351, ... 
           0.99999376,   0.99999986,   0.99817337,   0.99900084, ... 
           0.98732365,   0.93444853,   0.97286252,   0.98001672, ... 
           0.89205469,   0.96028624,   0.99752668,   0.97870897, ... 
           0.12594177 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.k17b.ok"; fail; fi
cat > test.k17bhat.ok << 'EOF'
k17bhat = [  -0.03240390,   0.01766715,   0.06056585,   0.05376689, ... 
              0.00353360,  -0.00052845,   0.06041454,   0.04469141, ... 
             -0.15871990,  -0.35609822,  -0.23138392,   0.19891511, ... 
              0.45192746,   0.27901674,  -0.07028883,  -0.20525288, ... 
              0.99203764 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.k17b.ok"; fail; fi
cat > test.yk17b.ok << 'EOF'
yk17b = [   -1244.9506,   -2056.7784,   -1671.7756,     586.3576, ... 
             3840.3175,    5667.3245,    2757.2467,   -3364.5435, ... 
            -6477.3508,   -5191.2985,   -1372.4583,    1298.9955, ... 
             1554.0881,    1563.5783,    2194.4840,    3446.6243, ... 
             3657.2980,    1306.2246,   -2801.2501,   -6492.2793, ... 
            -6002.6097,    -805.2922,    4873.5821,    6434.3323, ... 
             2377.9306,   -3174.7816,   -4798.2562,   -1623.7183, ... 
             1659.4160,    2787.6754,    1769.2544,    -627.1728, ... 
            -2621.2404,   -1006.9033,    3041.6255,    5218.9561, ... 
             1537.6686,   -3401.4835,   -4376.5639,    -578.7454, ... 
             2225.3704,     761.4374,   -3914.8597,   -3726.8338, ... 
             1971.5079,    6236.8074,    4620.6884,    -479.5287, ... 
            -3426.5124,   -2068.3810,    -863.3497,    -806.7072, ... 
            -1612.4071,    -349.1075,     495.6082,     111.1721, ... 
              660.1331,    1235.9626,     375.0669,    -643.5989, ... 
            -1451.4847,     274.8533,    2196.1199,     631.6430, ... 
            -3676.3613,   -4484.9091,    -448.4717,    5352.7531, ... 
             5591.3720,    -362.2750,   -4767.1705,   -2752.8644, ... 
             3913.6805,    4648.6236,   -1147.1186,   -5302.5650, ... 
            -2046.4388,    5814.1833,    6044.9756,   -1385.3676, ... 
            -8804.8682,   -6580.0019,    3149.5346,    9402.1803, ... 
             6691.2112,      54.9230,   -4551.9728,   -6021.1504, ... 
            -5118.6015,   -2156.4695,    3611.8709,    7183.6523, ... 
             3949.0155,   -3269.9885,   -6592.6274,    -952.6081, ... 
             6169.7352,    7745.3405,       5.0621,   -9449.8343, ... 
           -10479.8562,   -1982.6063,    8162.7143,   11041.0590, ... 
             4463.0819,   -3490.8275,   -6762.6095,   -5460.3819, ... 
            -1715.6663,     755.8908,    2825.7347,    4023.4152, ... 
             4409.8559,    2829.0537,   -1936.3991,   -5046.9831, ... 
            -3770.0387,    1039.9310,    3299.4228,    2361.2888, ... 
            -1814.0081,   -3554.6432,   -2451.5881,    1438.7357, ... 
             2757.5505,    1152.6348,    -833.5479,    -961.0486, ... 
             2492.6939,    4641.9812,    3373.8261,   -2930.1313, ... 
            -7945.3336,   -8442.2824,   -1815.2840,    4997.1719, ... 
             5720.3821,    3216.3734,     839.8198,     498.5168, ... 
            -1963.7341,   -4596.2401,   -5918.3133,   -1467.3378, ... 
             6167.4198,    8435.3952,    4583.2391,   -2141.2767, ... 
            -4280.2914,   -3766.3979,    -650.5897,    -721.4610, ... 
             -734.0377,     404.1206,    3059.8927,    4359.0222, ... 
             1638.8111,   -3370.6409,   -4600.0238,   -1821.1984, ... 
             3666.8276,    3851.0916,    1062.8069,   -2703.7016, ... 
            -1718.1374,    -231.3168,    -959.7696,   -2066.2901, ... 
             -663.5845,    1918.1114,    1356.9372,   -2515.1591, ... 
            -2786.4252,    1319.5253,    5934.7674,    2973.8855, ... 
            -2523.3789,   -5077.2830,    -709.8459,    2702.3368, ... 
              656.7832,   -2947.3142,   -2291.8004,    1407.5897, ... 
             1280.0284,    -548.3704,     518.7916,    3491.1486, ... 
             3800.0217,   -1164.8762,   -4834.2519,   -3726.3880, ... 
             -217.3639,    2242.1436,     914.6408,   -1163.9591, ... 
             -391.3430,    3025.0540,    2642.9181,     -87.6204, ... 
            -2829.5685,   -2483.0929,    1008.6853,    3467.2635, ... 
             3227.0677,     214.9775,   -3417.8941,   -3706.9701, ... 
            -1035.3241,    2370.8690,    3089.9205,    1132.8643, ... 
             -163.3181,       9.7406,     197.3776,     541.7152, ... 
            -1633.1719,   -3546.5871,    -973.8664,    1740.5859, ... 
             1884.7955,    -594.3357,   -1819.8100,    -667.0381, ... 
              272.5415,   -1290.7436,   -1594.3738,    1038.1074, ... 
             4905.2638,    5139.2871,     523.5430,   -4945.8348, ... 
            -7934.1931,   -6127.7148,    -707.1164,    3905.5983, ... 
             7416.2025,    5753.5152,    1866.6925,   -1596.3453, ... 
            -1634.8638,    -582.3358,   -1833.2849,   -4904.8208, ... 
            -5935.9799,   -2367.9382,    5185.3501,   10165.4577, ... 
             9266.7183,    1164.9871,   -8464.9507,  -11822.0991, ... 
            -5636.7325,    4253.7946,    8591.5445,    5083.5953 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.yk17b.ok"; fail; fi
cat > test.yk17bhat.ok << 'EOF'
yk17bhat = [   -9806.4200,     259.5468,   -7392.0405,   -6660.1270, ... 
                  74.6548,    1859.4664,   -7956.5297,     930.9792, ... 
               13496.5735,  -10534.0246,   -8024.9678,   -2056.4597, ... 
               -9329.4410,  -11305.6028,  -12131.1257,     240.4830, ... 
                1912.7789,  -10837.6073,    5883.5070,   -1118.6376, ... 
                2631.9133,    1013.1848,   -2545.3854,   -1388.6738, ... 
                -818.1586,    3742.9417,   -9082.8684,    2646.1743, ... 
               -4940.5968,   -6237.4772,   -2852.7619,  -11430.4050, ... 
               -5479.3652,    7632.3211,  -10282.6736,    4859.9920, ... 
               -5575.7187,   16902.2062,    8127.5670,    3123.7530, ... 
                4559.8064,    9615.2563,   -3625.6688,    4033.3343, ... 
                6474.1382,  -13590.6783,   -1031.0613,    8461.3190, ... 
               -6152.3999,   -3511.5636,   -2126.7336,   -5006.8909, ... 
               -1394.0201,  -11107.3416,  -11222.3811,   -8246.0457, ... 
                2058.6981,  -19009.1164,  -10715.5606,    3193.7796, ... 
               -7289.9120,    2300.4978,  -10944.0254,    -168.2819, ... 
                2325.0688,   -3950.1317,   -5428.3014,    7797.4921, ... 
              -11773.1689,   -5501.1070,    8458.1471,    1860.2571, ... 
                 889.7092,  -12180.0356,     785.7742,   16205.8900, ... 
                 726.3963,   -5404.9799,   -1195.5040,   11620.7350, ... 
               -4890.0192,   -1014.9040,    3031.5315,   -5121.6816, ... 
                7411.3843,    1882.1454,    2759.8352,    2750.4065, ... 
               -3964.5583,    1936.1161,    2987.1773,  -10502.8281, ... 
               -7858.5162,   -3863.3549,    2386.4694,    4306.6236, ... 
               -7944.3281,    6750.5749,    1171.7742,    1867.8072, ... 
               -1329.9462,    6667.8977,   -1433.3673,    -986.6023, ... 
                 435.3798,   13153.2458,    2974.0324,   -6079.3456, ... 
                3671.3551,   -2020.8258,    -786.1450,   -9005.1071, ... 
                8160.0072,     -87.3252,   -3268.5676,    9956.4449, ... 
                9898.4791,    5202.2361,      -3.2227,   15496.8289, ... 
               -1082.9163,    8241.5000,     142.7261,    7493.6734, ... 
              -13014.0700,    5272.4055,   -3240.0070,   -4764.6838, ... 
                7736.7027,    4136.3315,    6345.7210,   -6153.0614, ... 
               20087.8006,   -7624.2077,    5896.1714,  -12754.6387, ... 
               -3256.9791,    2385.9389,   -2695.9487,   -7495.8649, ... 
               -6225.6742,     -39.3180,   -9037.2447,   -3883.8589, ... 
               -1244.6865,   -7279.4631,    8426.2879,    7357.1445, ... 
               11139.5307,   11442.4550,   14456.4891,    4064.6697, ... 
               15127.5440,    9429.8467,    9798.6415,    5422.3356, ... 
                2745.3969,    2967.8975,   13361.7333,  -14652.4667, ... 
               11147.0756,  -12998.8029,    4281.5365,   -5445.7680, ... 
                7578.1015,  -14994.4697,   -4702.2790,   10744.8312, ... 
               -8898.0092,   -6607.4869,   -9108.9792,   -1759.7028, ... 
                9019.4667,  -12883.6592,     269.7611,    2041.0544, ... 
                5538.2797,   10422.5720,     859.8059,    3002.0937, ... 
                -205.8101,   16353.8103,   -8017.2068,   -6570.7834, ... 
               -6292.4394,     387.3447,    1114.1370,  -17626.3931, ... 
               -4614.9642,    4553.2507,   -3780.5174,   -6600.2191, ... 
               -7595.6934,    6327.8842,   -8779.7907,  -10950.3961, ... 
                9861.6754,    3530.6599,  -11919.0833,    6015.3278, ... 
               11537.0427,    1818.1568,    5311.7218,    8940.7691, ... 
               10869.5151,   10104.3495,    2618.5455,   11271.0697, ... 
                8760.3872,     787.5238,    1669.6620,    -224.5135, ... 
                8894.9011,    3616.2708,   -7795.4089,    8882.2568, ... 
               -1262.3847,   -1396.5804,    7035.7883,  -11993.8593, ... 
                1052.2756,    -660.5099,    -679.0022,   -9814.2917, ... 
               -3576.7506,   -9323.8363,     688.0464,   -3650.1355, ... 
               -2901.9999,    4644.2508,    5944.6349,     -64.6176, ... 
                2524.1401,   -2430.9100,   -3613.8620,   -8065.7164, ... 
               -2237.8197,  -12754.8544,    4794.4314,    2919.4371, ... 
                4733.2327,    6661.9587,   -2490.7339,    6570.2227, ... 
               -2986.4544,   -8271.8520,    7007.6379,   -4400.8246, ... 
                3805.8663,   -1147.8844,    2007.4360,    7880.0851, ... 
                1278.8598,   -1395.7187,  -12421.3625,   10460.0403 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.yk17bhat.ok"; fail; fi
cat > test.stdxxk17b.ok << 'EOF'
stdxxk17b = [     265.4528,     301.5212,     579.1487,     729.1803, ... 
                  729.8112,     729.7803,     882.1394,     956.0647, ... 
                 1588.9129,    3215.4083,    3519.2822,    3837.2895, ... 
                 4454.5239,    4315.1586,    4332.7845,    4018.0953 ];
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.stdxxk17b.ok"; fail; fi
cat > test.ypk17b.ok << 'EOF'
ypk17b = [    -317.9332,     181.8754,     351.4908,     429.7064, ... 
               591.2686,     856.0857,     689.5672,     506.0734, ... 
              -356.7234,   -3323.6439,   -4702.5474,   -2032.1289, ... 
              3366.4935,    7163.0852,    5721.1273,    1204.1164, ... 
             -2716.5548,   -3866.4223,   -2852.2786,   -1939.6310, ... 
             -1535.7357,   -1431.5751,    -399.5255,    2515.3649, ... 
              5245.1666,    5118.4588,     995.0056,   -4639.9432, ... 
             -6964.0527,   -2819.9567,    3189.6336,    5237.5124, ... 
              2680.3411,    -906.3617,   -3400.7202,   -3137.7231, ... 
              -614.7611,    2727.4026,    2184.8167,   -1920.9629, ... 
             -5112.3425,   -2665.6390,    2497.1397,    5853.3913, ... 
              2738.8264,   -2323.6678,   -2306.3872,    1685.6674, ... 
              3183.5888,    -591.8127,   -5656.7074,   -4812.9079, ... 
               -61.2555,    4100.4941,    3334.5646,    1335.9822, ... 
               821.4084,     106.4313,    -557.5385,    -172.5157, ... 
              -216.7074,     -85.0736,    -884.5311,   -1216.6572, ... 
               270.1873,    2129.8815,     777.6219,   -1326.0153, ... 
             -1495.0827,    1716.2651,    4432.9591,    1491.4338, ... 
             -4056.9361,   -6847.4692,   -1580.4971,    5053.2294, ... 
              4556.9238,   -1488.3901,   -6057.6732,   -1658.9226, ... 
              4175.5470,    4009.1661,   -2357.2910,   -6087.6169, ... 
             -1026.6589,    6800.8030,    6551.9032,   -1880.3009, ... 
             -8602.0287,   -7182.1865,     139.9275,    5371.6937, ... 
              6428.4150,    4980.3359,    1381.4099,   -3535.9105, ... 
             -7607.3987,   -4779.2097,    1741.9791,    6340.8582, ... 
              3797.8485,   -3738.2182,   -7236.6548,   -1924.6877, ... 
              6915.8068,   10434.5380,    3231.9061,   -7805.2676, ... 
            -11443.0672,   -5772.9859,    4112.3740,    8944.2433, ... 
              6933.4494,    1163.5089,   -3838.0313,   -4534.3235, ... 
             -3873.2342,   -2925.6708,   -1507.6855,    2419.3324, ... 
              4514.5346,    3909.7581,    -480.5228,   -3318.4702, ... 
             -3212.8512,     771.5364,    4056.4381,    3090.4714, ... 
              -180.1331,   -3563.4413,   -2871.4112,    -771.7304, ... 
              1128.1105,    -635.0054,   -2348.7113,   -2446.2271, ... 
              1668.7921,    7839.9925,    7998.3851,    1676.6565, ... 
             -6209.5197,   -7240.9461,   -3816.2818,     987.8713, ... 
              2666.2361,    2103.5404,    3618.6542,    3751.7226, ... 
               666.5872,   -6099.1331,   -7893.1320,   -4924.9250, ... 
              2572.4242,    6363.7089,    4933.2549,     912.5229, ... 
             -1638.9362,   -1418.4706,    -427.0547,   -1992.0383, ... 
             -2717.1560,   -2037.3605,    2676.7000,    4455.8428, ... 
              2488.9997,   -3220.3572,   -5005.0842,   -1248.4303, ... 
              2846.5512,    2944.9580,     725.9469,     265.9045, ... 
              1916.3878,     732.4333,   -1579.1768,   -2445.6786, ... 
              1553.0158,    2888.5769,     -25.2047,   -5147.1629, ... 
             -4202.9720,    2077.2754,    5609.3186,    2312.8229, ... 
             -2639.3611,   -1333.9947,    2191.5500,    1881.8670, ... 
              -900.3716,   -2086.8423,     -67.7863,    -248.5895, ... 
             -2649.1797,   -2620.1882,     535.6614,    4491.0940, ... 
              4684.6058,     884.6522,   -3435.0303,   -2193.1902, ... 
               299.7707,     729.4960,    -984.1828,   -2369.4881, ... 
              -568.1542,    1824.1588,    2043.1568,     116.0001, ... 
             -2849.3449,   -3251.3258,    -686.7475,    2973.2081, ... 
              4323.0661,    1348.1869,   -2714.3541,   -3579.1267, ... 
             -2561.7752,     311.9428,    2166.7147,     215.2444, ... 
              -500.6989,    1091.7640,    2791.4381,    1398.4253, ... 
             -1583.6758,   -2303.0930,     577.8440,    2241.5820, ... 
              1335.0095,    -379.8005,    -297.3635,     441.2809, ... 
             -1199.7643,   -3401.1602,   -3360.7979,    -118.9059, ... 
              5585.7482,    7139.1417,    5320.3157,     -43.8884, ... 
             -5340.9376,   -8260.1522,   -6499.0664,   -1098.2171, ... 
              3544.3285,    4217.5194,    2598.3992,    1146.6169, ... 
              2475.4310,    2905.9000,     659.7915,   -4173.8950, ... 
             -8286.1588,   -7791.3304,   -1044.1035,    8278.4604 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.ypk17b.ok"; fail; fi
cat > test.ypk17bhat.ok << 'EOF'
ypk17bhat = [      40.3625,      44.6614,     -57.8113,    -240.8975, ... 
                 -331.5647,    -177.3790,     195.2899,     531.0269, ... 
                  644.8981,     805.0843,    1112.7880,     710.2833, ... 
                -1673.2969,   -5453.2349,   -6823.7087,   -1717.7632, ... 
               -10020.9575,    2482.2275,    -744.8311,   -4231.7043, ... 
                 1887.5967,   10418.5668,   -5627.6250,  -13846.5083, ... 
                 4192.3379,  -10838.9706,  -14887.1017,   -6114.8927, ... 
                -2541.9344,     -80.2665,   -8790.0418,   -2483.6100, ... 
                 7303.7175,   -6691.0640,    4404.2827,   -3291.8858, ... 
                 -607.6616,    2248.3017,     287.4313,   -1799.4575, ... 
                -4445.6403,    3974.9499,  -10923.2088,   -4016.4113, ... 
                -8937.3694,   -7677.6806,    3676.4696,   -4974.7982, ... 
                -9906.7025,    9744.9836,    1209.7536,   17468.0241, ... 
                -3550.9112,    8525.4168,    5828.3251,    2328.7750, ... 
                  867.5024,    7711.6446,   -8437.2987,   -4037.7410, ... 
                13117.7056,   -4930.1566,   -7365.4648,    4347.9965, ... 
                -3814.6579,   -4799.1852,   -7397.4546,  -12705.4780, ... 
                -2659.6388,   -5843.8502,  -12277.7622,  -16951.4010, ... 
                 5628.7510,   -5254.6203,   -8643.1938,     696.0544, ... 
                -9656.4057,    4669.3060,   -6186.1058,   -1461.1919, ... 
                 1684.5642,   -5949.4324,  -12451.9793,   13196.2134, ... 
                 2549.0127,   -8775.4384,   -4568.7034,   -1074.5285, ... 
                15898.9477,    1070.7209,   -8886.0454,    5077.8816, ... 
                 4796.2202,      51.0714,   -6782.5163,    6861.9313, ... 
                -3036.3303,    1234.7775,   10522.0333,   -1630.1560, ... 
                 3909.4291,   -1421.7413,     517.6119,    3285.3462, ... 
                -9425.9754,  -10462.1701,    1282.2370,     -74.0415, ... 
                 1358.8873,   -2602.2120,   -1054.6630,    6716.0977, ... 
                -6848.7831,    4541.9355,    2167.9790,    1980.6723, ... 
                -4844.6954,    7586.5067,    8519.8568,    5779.5341, ... 
                -6631.7016,    2584.2201,    1687.8897,   -8400.6708, ... 
                  242.7464,    -305.6000,    4855.0738,   -8181.6593, ... 
                 9473.5066,   10470.9147,     575.2870,    5701.8391, ... 
                 9605.0348,    9505.0246,   -2186.8757,   12531.2871, ... 
                -4007.6731,     164.2427,   -8373.1121,    7201.2189, ... 
                -9893.6411,    9276.4685,    7642.2667,   -2041.0359, ... 
                 5035.5998,    5666.2827,   11277.2162,  -14871.4975, ... 
                 7263.4558,  -12142.7038,   10128.6097,   -3927.7411, ... 
                -6852.3403,   -4507.9278,   -4371.9650,   -7356.8747, ... 
                -9507.7795,    -943.8913,   -6651.4462,     475.7884, ... 
                11370.4676,    3921.0631,   13052.3249,    8678.3755, ... 
                 8373.4660,    8978.2633,   18118.9018,    5508.9921, ... 
                 9670.1504,    3719.8773,    7343.8254,    7441.0337, ... 
                  869.9635,   -7903.2342,   10269.0099,  -14312.2535, ... 
                14163.2654,   -9261.4358,   -1349.5617,  -11368.6260, ... 
                13585.7006,   -6062.8398,  -16562.4507,      -4.6650, ... 
                -4586.7025,    2838.8925,   -6612.0813,  -11151.3159, ... 
                10725.5864,     443.5982,    8874.2094,    3229.6490, ... 
                 -908.3610,    9501.0650,    6823.0223,    2682.8866, ... 
               -15839.6245,    5584.9204,   -2339.7916,   -1945.8691, ... 
               -11128.8914,   -7591.3551,    8141.9473,   -7479.8536, ... 
                -8765.4753,    -769.5362,   -2528.1202,   -5320.3911, ... 
               -12294.2196,    8481.5545,    2232.0439,  -13908.7824, ... 
                 2906.8476,   13553.4302,   -3030.9673,    2943.3131, ... 
                13193.2922,    8445.7435,    7396.8957,    6647.9139, ... 
                 9162.3851,   12101.5771,    -926.3697,    1533.8394, ... 
                 6148.8357,    5405.6205,    5605.5727,   -4568.5309, ... 
                 2943.6683,    7844.2402,   -5990.3000,    6451.6774, ... 
                -2918.7516,   -7298.5339,    9514.7878,   -8072.3348, ... 
                -5560.7098,   -9128.3295,   -3255.5413,   -7448.7033, ... 
                 1012.1016,   -5127.1892,    6145.1996,    5892.1950, ... 
                  419.3522,      31.9551,     176.0489,   -7070.7585, ... 
                -5117.1146,   -7456.0990,   -4267.1865,   -3271.7388, ... 
                11026.4137,   -1943.8454,    6249.8833,    1139.0714 ]';
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.ypk17bhat.ok"; fail; fi
cat > test.stdxxpk17b.ok << 'EOF'
stdxxpk17b = [    8187.6981,    8186.2078,    8171.2587,    8158.5257, ... 
                  8158.2426,    8158.2417,    8143.1394,    8134.7717, ... 
                  8035.1657,    7532.9007,    7395.8134,    7235.9918, ... 
                  6873.4021,    6960.8967,    6949.4672,    7135.3976 ];
EOF
if [ $? -ne 0 ]; then echo "Failed output cat test.stdxxpk17b.ok"; fail; fi

#
# run and see if the results match
#
echo "Running $prog"

octave --no-gui -q $prog >test.out 2>&1
if [ $? -ne 0 ]; then echo "Failed running $prog"; fail; fi

diff -Bb test.b17b.ok complementaryFIRlattice_bandpass_test_b17b_coef.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.b17b.ok"; fail; fi

diff -Bb test.b17bc.ok complementaryFIRlattice_bandpass_test_b17bc_coef.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.b17bc.ok"; fail; fi

diff -Bb test.k17b.ok complementaryFIRlattice_bandpass_test_k17b_coef.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.k17b.ok"; fail; fi

diff -Bb test.k17bhat.ok complementaryFIRlattice_bandpass_test_k17bhat_coef.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.k17bhat.ok"; fail; fi

diff -Bb test.yk17b.ok complementaryFIRlattice_bandpass_test_yk17b.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.yk17b.ok"; fail; fi

diff -Bb test.yk17bhat.ok complementaryFIRlattice_bandpass_test_yk17bhat.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.yk17bhat.ok"; fail; fi

diff -Bb test.stdxxk17b.ok complementaryFIRlattice_bandpass_test_stdxxk17b.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.stdxxk17b.ok"; fail; fi

diff -Bb test.ypk17b.ok complementaryFIRlattice_bandpass_test_ypk17b.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.ypk17b.ok"; fail; fi

diff -Bb test.ypk17bhat.ok complementaryFIRlattice_bandpass_test_ypk17bhat.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.ypk17bhat.ok"; fail; fi

diff -Bb test.stdxxpk17b.ok complementaryFIRlattice_bandpass_test_stdxxpk17b.m
if [ $? -ne 0 ]; then echo "Failed diff -Bb test.stdxxpk17b.ok"; fail; fi

#
# this much worked
#
pass

